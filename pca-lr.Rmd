---
title: "Metrics and ML - Original Imputation Method"
author: "Sydney Gu and Isabella Lin"
date: "2025-02-02"
output:
  pdf_document: default
  html_document:
    df_print: paged
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, echo=FALSE, warning=FALSE}
library(dplyr)
library(tidyr)
library(haven)
library(glmnet)
library(data.table)
library(knitr)
```

```{r}
purl("cleaning.Rmd", output = "cleaning2.R")
source("cleaning2.R")
```
Remove observations with NAs:
```{r}
cex <- na.omit(cex)
```

```{r}
features <- cex %>% select(-food, -pfaw, -pf, -pfout, -pfood, -pfoodin, -pfin, -cpi)
pca <- prcomp(features, center = TRUE, scale. = TRUE)
loadings <- abs(pca$rotation)
top <- 5
num_pcs <- 5

top_vars <- apply(loadings[, 1:num_pcs], 2, function(x) {
  names(sort(x, decreasing = TRUE)[1:top])
})

print(top_vars)
```

```{r}
test_pca_data <- predict(pca, newdata = psid)
```

